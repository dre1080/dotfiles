#!/usr/bin/env bash
{{ if not .isWSL }}
set -e

sudo add-apt-repository multiverse -y

echo ttf-mscorefonts-installer msttcorefonts/accepted-mscorefonts-eula select true | sudo debconf-set-selections
sudo apt install -y fontconfig ttf-mscorefonts-installer

FONT_NAME="JetBrainsMono Nerd Font"
IS_FONT_INSTALLED=$(fc-list :family="$FONT_NAME")

if [[ -z "$IS_FONT_INSTALLED" ]]; then
  eget -a JetBrainsMono.tar.xz -f 'JetBrainsMonoNerdFont-*.ttf' --all --to ~/.local/share/fonts ryanoasis/nerd-fonts

  sudo fc-cache -f

  gsettings set org.gnome.desktop.interface monospace-font-name "$FONT_NAME 10"
fi
{{ end }}
